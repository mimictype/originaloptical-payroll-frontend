# フロントUI構造
 - 基本情報
 - 固定薪資結構
 - 非固定支付項目
 - 應代扣項目（控除）
 - 合計（A＋B-C）

# ページ構造
 - TOP画面
    - 全明細閲覧ページ
      - EmployeeList
        - 明細ページ


# API
## 従業員一覧取得
sho@hayashinoMacBook-Air ~ % curl -L -G "https://script.google.com/macros/s/XXXX \
  --data-urlencode "action=listEmployees" \
  -H "Accept: application/json"
{"status":"success","data":[{"id":1,"employee_id":"A124","user_email":"a124@example.com","name":"山田太郎","bank_name":"三井住友銀行","bank_account":1112223},{"id":2,"employee_id":"A777","user_email":"c567@example.com","name":"鈴木一郎","bank_name":"りそな銀行","bank_account":9876543}]}

## 特定給与明細取得
curl -L -G "https://script.google.com/macros/s/AKfycby2fCuLqOpK4FQBixl2Wl9aD4cwtSfRXYo66qHUgjKiPegnrgNYztYSabB9b17yPhU1eA/exec" \
  --data-urlencode "action=getPayroll" \
  --data-urlencode "id=A124_11408"
{"status":"success","record":{"id":"A124_11408","pay_date":1140816,"base_salary":300000,"meal_allowance":10000,"fixed_custom1_name":"","fixed_custom1_amount":"","fixed_custom2_name":"","fixed_custom2_amount":"","fixed_custom3_name":"","fixed_custom3_amount":"","subtotal_A":310000,"overtime_weekday":20000,"overtime_holiday":0,"overtime_restday":0,"overtime_national":0,"bonus":50000,"variable_custom1_name":"","variable_custom1_amount":"","variable_custom2_name":"","variable_custom2_amount":"","variable_custom3_name":"","variable_custom3_amount":"","subtotal_B":70000,"labor_insurance":15000,"health_insurance":20000,"national_insurance":0,"absence_deduction":0,"sick_deduction":0,"deduct_custom1_name":"","deduct_custom1_amount":"","deduct_custom2_name":"","deduct_custom2_amount":"","deduct_custom3_name":"","deduct_custom3_amount":"","subtotal_C":35000}}%  



## 特定休暇明細取得

 --data-urlencode "action=getleave" \
  --data-urlencode "id=A124_11408" | jq .
{
  "status": "success",
  "record": {
    "id": "A124_11408",
    "leave_start": 1140101,
    "leave_end": 1141231,
    "carryover_days": 5,
    "granted_days": 15,
    "used_days": 3,
    "remaining_days": 17,
    "planned_days_str": "2/10,3/5,4/1",
    "comp_expiry": 1141231,
    "carryover_hours": 10,
    "granted_hours": 5,
    "used_hours": 2,
    "cashout_hours": 1,
    "remaining_hours": 12
  }
}


# データ構造

```
Record {
  id: string,                // 記錄ID（員工ID + 發薪日，例: "A124_1140816"）
  employee_id: string,        // 員工ID
  user_email: string,         // 員工Email
  name: string,               // 姓名
  bank_name: string,          // 銀行名稱
  bank_account: string,       // 銀行帳號
  pay_date: string,           // 發薪日期 (民國年-MM-DD)

  base_salary: number,        // 底薪
  meal_allowance: number,     // 伙食津貼
  fixed_custom1_name: string, // 固定自訂項目1名稱
  fixed_custom1_amount: number,
  fixed_custom2_name: string,
  fixed_custom2_amount: number,
  fixed_custom3_name: string,
  fixed_custom3_amount: number,
  subtotal_A: number,         // 小計(A)

  overtime_weekday: number,   // 平日加班費
  overtime_holiday: number,   // 休假日加班費
  overtime_restday: number,   // 休息日加班費
  overtime_national: number,  // 國定假日加班費
  bonus: number,              // 獎金
  variable_custom1_name: string,
  variable_custom1_amount: number,
  variable_custom2_name: string,
  variable_custom2_amount: number,
  variable_custom3_name: string,
  variable_custom3_amount: number,
  subtotal_B: number,         // 小計(B)

  labor_insurance: number,    // 勞保費
  health_insurance: number,   // 健保費
  national_insurance: number, // 國保
  absence_deduction: number,  // 事假扣款
  sick_deduction: number,     // 病假扣款
  deduct_custom1_name: string,
  deduct_custom1_amount: number,
  deduct_custom2_name: string,
  deduct_custom2_amount: number,
  deduct_custom3_name: string,
  deduct_custom3_amount: number,
  subtotal_C: number          // 小計(C)
}
```

# 休暇テーブルデータ構造

## カラム一覧（繁體字 ↔ 英カラム名）
| 繁體字 | 英カラム名 | 型 / 例 | 説明 |
|---|---|---|---|
| 記錄ID | `id` | string（例: `A124_11408`） | 主キー。`{employee_id}_{rocYYMM}` 等で一意にする想定（任意ルール）。 |
| 請休期間開始 | `leave_start` | ROC yyyMMdd（例: `1140101`） | 付与/管理期間の開始。7桁。 |
| 請休期間結束 | `leave_end` | ROC yyyMMdd（例: `1141231`） | 付与/管理期間の終了。7桁。 |
| 經過遞延的特別休假日數 | `carryover_days` | number（例: `5`） | 有給の繰越（日）。 |
| 今年可休的特別休假日數 | `granted_days` | number（例: `15`） | 当年付与（日）。 |
| 今年已休的特別休假日數 | `used_days` | number（例: `3`） | 当年取得済み（日）。 |
| 今年未休的特別休假日數 | `remaining_days` | number（例: `17`） | 残日数。通常は `carryover_days + granted_days - used_days`。 |
| 今月特別休假的請休日 | `thismonth_leave_days` | string（例: `"8/20,8/5"`） | 今月の予定取得日。自由書式の文字列（カンマ区切り等）。 |
| 勞雇雙方的定之補休期限 | `comp_expiry` | ROC yyyMMdd（例: `1141231`） | 代休の消化期限。7桁。 |
| 至上月底止休未補休時數（I） | `carryover_hours` | number（例: `10`） | 代休の月初繰入（時間）。 |
| 本月選擇補休時數（II） | `granted_hours` | number（例: `5`） | 今月、残業代→代休に振替した時間。 |
| 本月已補休時數（III） | `used_hours` | number（例: `2`） | 今月消化した代休時間。 |
| 屆期未休補折發工資時數（IV） | `cashout_hours` | number（例: `1`） | 期限切れで賃金精算に回した時間。 |
| 至本月止休未休補休時數（I+II-III-IV） | `remaining_hours` | number（例: `12`） | 代休残時間。`carryover_hours + granted_hours - used_hours - cashout_hours`。 |

```
{
  "status": "success",
  "record": {
    "id": "A124_11408",
    "leave_start": 1140101,
    "leave_end": 1141231,
    "carryover_days": 5,
    "granted_days": 15,
    "used_days": 3,
    "remaining_days": 17,
    "thismonth_leave_days": "8/20",
    "comp_expiry": 1141231,
    "carryover_hours": 10,
    "granted_hours": 5,
    "used_hours": 2,
    "cashout_hours": 1,
    "remaining_hours": 12
  }
}
```
